{"ast":null,"code":"import React from'react';import{HashRouter as Router,Routes,Route,Navigate}from'react-router-dom';import{ThemeProvider}from'@mui/material/styles';import CssBaseline from'@mui/material/CssBaseline';import theme from'./theme';import{useHealthCheck}from'./utils/healthCheck';import{Snackbar,Alert}from'@mui/material';// Layouts\nimport StoreLayout from'./layouts/Store/StoreLayout';import AdminLayout from'./layouts/Admin/AdminLayout';// Store Pages\nimport Home from'./pages/Store/Home';import Login from'./pages/Store/Login';import Register from'./pages/Store/Register';import ForgotPassword from'./pages/Store/ForgotPassword';import Profile from'./pages/Store/Profile';import Cart from'./pages/Store/Cart';import ProductDetail from'./pages/Store/ProductDetail';// Admin Pages\nimport AdminLogin from'./pages/Admin/Login';import AdminDashboard from'./pages/Admin/Dashboard';// 路由保護組件\nimport{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";const ProtectedRoute=_ref=>{let{children}=_ref;const isAuthenticated=localStorage.getItem('adminLoggedIn')==='true';if(!isAuthenticated){return/*#__PURE__*/_jsx(Navigate,{to:\"/admin/login\"});}return children;};// 使用者路由保護組件\nconst UserProtectedRoute=_ref2=>{let{children}=_ref2;const isAuthenticated=localStorage.getItem('userToken');if(!isAuthenticated){// 儲存當前嘗試訪問的路徑，登入後可以重定向回來\nsessionStorage.setItem('redirectUrl',window.location.pathname);return/*#__PURE__*/_jsx(Navigate,{to:\"/login\"});}return children;};function App(){const{isAnyServiceDown}=useHealthCheck();return/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsxs(ThemeProvider,{theme:theme,children:[/*#__PURE__*/_jsx(CssBaseline,{}),/*#__PURE__*/_jsx(Router,{children:/*#__PURE__*/_jsxs(Routes,{children:[/*#__PURE__*/_jsx(Route,{path:\"/login\",element:/*#__PURE__*/_jsx(Login,{})}),/*#__PURE__*/_jsx(Route,{path:\"/register\",element:/*#__PURE__*/_jsx(Register,{})}),/*#__PURE__*/_jsx(Route,{path:\"/forgot-password\",element:/*#__PURE__*/_jsx(ForgotPassword,{})}),/*#__PURE__*/_jsxs(Route,{path:\"/\",element:/*#__PURE__*/_jsx(StoreLayout,{}),children:[/*#__PURE__*/_jsx(Route,{index:true,element:/*#__PURE__*/_jsx(Home,{})}),/*#__PURE__*/_jsx(Route,{path:\"profile\",element:/*#__PURE__*/_jsx(UserProtectedRoute,{children:/*#__PURE__*/_jsx(Profile,{})})}),/*#__PURE__*/_jsx(Route,{path:\"store\",element:/*#__PURE__*/_jsx(Home,{})}),/*#__PURE__*/_jsx(Route,{path:\"store/product/:id\",element:/*#__PURE__*/_jsx(ProductDetail,{})}),/*#__PURE__*/_jsx(Route,{path:\"store/orders\",element:/*#__PURE__*/_jsx(UserProtectedRoute,{children:/*#__PURE__*/_jsx(\"div\",{children:\"\\u8A02\\u55AE\\u8A18\\u9304\\u9801\\u9762\"})})}),/*#__PURE__*/_jsx(Route,{path:\"store/wishlist\",element:/*#__PURE__*/_jsx(UserProtectedRoute,{children:/*#__PURE__*/_jsx(\"div\",{children:\"\\u6536\\u85CF\\u6E05\\u55AE\\u9801\\u9762\"})})}),/*#__PURE__*/_jsx(Route,{path:\"store/cart\",element:/*#__PURE__*/_jsx(UserProtectedRoute,{children:/*#__PURE__*/_jsx(\"div\",{children:\"\\u8CFC\\u7269\\u8ECA\\u9801\\u9762\"})})}),/*#__PURE__*/_jsx(Route,{path:\"cart\",element:/*#__PURE__*/_jsx(Cart,{})})]}),/*#__PURE__*/_jsxs(Route,{path:\"/admin\",element:/*#__PURE__*/_jsx(AdminLayout,{}),children:[/*#__PURE__*/_jsx(Route,{path:\"login\",element:/*#__PURE__*/_jsx(AdminLogin,{})}),/*#__PURE__*/_jsx(Route,{path:\"dashboard\",element:/*#__PURE__*/_jsx(ProtectedRoute,{children:/*#__PURE__*/_jsx(AdminDashboard,{})})})]})]})}),/*#__PURE__*/_jsx(Snackbar,{open:isAnyServiceDown,anchorOrigin:{vertical:'bottom',horizontal:'right'},sx:{position:'fixed',bottom:16,right:16},children:/*#__PURE__*/_jsx(Alert,{severity:\"error\",children:\"\\u7CFB\\u7D71\\u670D\\u52D9\\u7570\\u5E38\\uFF0C\\u8ACB\\u7A0D\\u5F8C\\u518D\\u8A66\"})})]})});}export default App;","map":{"version":3,"names":["React","HashRouter","Router","Routes","Route","Navigate","ThemeProvider","CssBaseline","theme","useHealthCheck","Snackbar","Alert","StoreLayout","AdminLayout","Home","Login","Register","ForgotPassword","Profile","Cart","ProductDetail","AdminLogin","AdminDashboard","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","ProtectedRoute","_ref","children","isAuthenticated","localStorage","getItem","to","UserProtectedRoute","_ref2","sessionStorage","setItem","window","location","pathname","App","isAnyServiceDown","path","element","index","open","anchorOrigin","vertical","horizontal","sx","position","bottom","right","severity"],"sources":["/Users/sumingkai/Documents/OrderManagerSystem/frontend/src/App.js"],"sourcesContent":["import React from 'react';\nimport { HashRouter as Router, Routes, Route, Navigate } from 'react-router-dom';\nimport { ThemeProvider } from '@mui/material/styles';\nimport CssBaseline from '@mui/material/CssBaseline';\nimport theme from './theme';\nimport { useHealthCheck } from './utils/healthCheck';\nimport { Snackbar, Alert } from '@mui/material';\n\n// Layouts\nimport StoreLayout from './layouts/Store/StoreLayout';\nimport AdminLayout from './layouts/Admin/AdminLayout';\n\n// Store Pages\nimport Home from './pages/Store/Home';\nimport Login from './pages/Store/Login';\nimport Register from './pages/Store/Register';\nimport ForgotPassword from './pages/Store/ForgotPassword';\nimport Profile from './pages/Store/Profile';\nimport Cart from './pages/Store/Cart';\nimport ProductDetail from './pages/Store/ProductDetail';\n\n// Admin Pages\nimport AdminLogin from './pages/Admin/Login';\nimport AdminDashboard from './pages/Admin/Dashboard';\n\n// 路由保護組件\nconst ProtectedRoute = ({ children }) => {\n    const isAuthenticated = localStorage.getItem('adminLoggedIn') === 'true';\n\n    if (!isAuthenticated) {\n        return <Navigate to=\"/admin/login\" />;\n    }\n\n    return children;\n};\n\n// 使用者路由保護組件\nconst UserProtectedRoute = ({ children }) => {\n    const isAuthenticated = localStorage.getItem('userToken');\n\n    if (!isAuthenticated) {\n        // 儲存當前嘗試訪問的路徑，登入後可以重定向回來\n        sessionStorage.setItem('redirectUrl', window.location.pathname);\n        return <Navigate to=\"/login\" />;\n    }\n\n    return children;\n};\n\nfunction App() {\n    const { isAnyServiceDown } = useHealthCheck();\n\n    return (\n        <>\n            <ThemeProvider theme={theme}>\n                <CssBaseline />\n                <Router>\n                    <Routes>\n                        {/* 登入相關頁面 */}\n                        <Route path=\"/login\" element={<Login />} />\n                        <Route path=\"/register\" element={<Register />} />\n                        <Route path=\"/forgot-password\" element={<ForgotPassword />} />\n\n                        {/* 商店前台路由 */}\n                        <Route path=\"/\" element={<StoreLayout />}>\n                            <Route index element={<Home />} />\n                            <Route\n                                path=\"profile\"\n                                element={\n                                    <UserProtectedRoute>\n                                        <Profile />\n                                    </UserProtectedRoute>\n                                }\n                            />\n                            <Route path=\"store\" element={<Home />} />\n                            <Route path=\"store/product/:id\" element={<ProductDetail />} />\n                            <Route path=\"store/orders\" element={\n                                <UserProtectedRoute>\n                                    <div>訂單記錄頁面</div>\n                                </UserProtectedRoute>\n                            } />\n                            <Route path=\"store/wishlist\" element={\n                                <UserProtectedRoute>\n                                    <div>收藏清單頁面</div>\n                                </UserProtectedRoute>\n                            } />\n                            <Route path=\"store/cart\" element={\n                                <UserProtectedRoute>\n                                    <div>購物車頁面</div>\n                                </UserProtectedRoute>\n                            } />\n                            <Route path=\"cart\" element={<Cart />} />\n                        </Route>\n\n                        {/* 管理後台路由 */}\n                        <Route path=\"/admin\" element={<AdminLayout />}>\n                            <Route path=\"login\" element={<AdminLogin />} />\n                            <Route\n                                path=\"dashboard\"\n                                element={\n                                    <ProtectedRoute>\n                                        <AdminDashboard />\n                                    </ProtectedRoute>\n                                }\n                            />\n                        </Route>\n                    </Routes>\n                </Router>\n\n                {/* 服務狀態提示 */}\n                <Snackbar\n                    open={isAnyServiceDown}\n                    anchorOrigin={{ vertical: 'bottom', horizontal: 'right' }}\n                    sx={{ position: 'fixed', bottom: 16, right: 16 }}\n                >\n                    <Alert severity=\"error\">\n                        系統服務異常，請稍後再試\n                    </Alert>\n                </Snackbar>\n            </ThemeProvider>\n        </>\n    );\n}\n\nexport default App; "],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}