{"ast":null,"code":"import React,{useState,useEffect,useMemo,useCallback}from'react';import{Container,Paper,Typography,Box,Avatar,List,ListItem,ListItemText,Divider,Button,Dialog,DialogTitle,DialogContent,DialogActions,TextField,Grid,Switch,FormControlLabel,IconButton,Card,CardContent,ListItemIcon,Chip,Snackbar,Alert,Menu,MenuItem,CircularProgress}from'@mui/material';import{useNavigate}from'react-router-dom';import SaveIcon from'@mui/icons-material/Save';import AddIcon from'@mui/icons-material/Add';import LogoutIcon from'@mui/icons-material/Logout';import SettingsIcon from'@mui/icons-material/Settings';import PersonIcon from'@mui/icons-material/Person';import VerifiedUserIcon from'@mui/icons-material/VerifiedUser';import CalendarTodayIcon from'@mui/icons-material/CalendarToday';import LanguageIcon from'@mui/icons-material/Language';import LocationOnIcon from'@mui/icons-material/LocationOn';import LocationOffIcon from'@mui/icons-material/LocationOff';import MoreVertIcon from'@mui/icons-material/MoreVert';import DeleteIcon from'@mui/icons-material/Delete';import EditIcon from'@mui/icons-material/Edit';import LockResetIcon from'@mui/icons-material/LockReset';import VisibilityIcon from'@mui/icons-material/Visibility';import VisibilityOffIcon from'@mui/icons-material/VisibilityOff';import{createAuthAxios}from'../../utils/auth';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const AUTH_SERVICE_URL=process.env.AUTH_SERVICE_URL||'https://ordermanagersystem-auth-service.onrender.com';const Profile=()=>{var _user$username,_user$username$;const navigate=useNavigate();const[user,setUser]=useState(null);const[addresses,setAddresses]=useState([]);const[preferencesForm,setPreferencesForm]=useState({language:'zh_TW',currency:'TWD',theme:'light',notification_email:true,notification_sms:false});const[openAddressDialog,setOpenAddressDialog]=useState(false);const[addressForm,setAddressForm]=useState({name:'',phone:'',postal_code:'',city:'',district:'',street:'',is_default:false});const[editingAddressIndex,setEditingAddressIndex]=useState(null);const[snackbar,setSnackbar]=useState({open:false,message:'',severity:'success'});const[anchorEl,setAnchorEl]=useState(null);const[selectedAddress,setSelectedAddress]=useState(null);const[deleteConfirmOpen,setDeleteConfirmOpen]=useState(false);const[isLoading,setIsLoading]=useState(true);const[resetPasswordDialog,setResetPasswordDialog]=useState(false);const[resetPasswordForm,setResetPasswordForm]=useState({newPassword:'',confirmPassword:''});const[showPassword,setShowPassword]=useState({newPassword:false,confirmPassword:false});// 使用 useMemo 創建 authAxios 實例，避免每次重新渲染都創建新實例\nconst authAxios=useMemo(()=>createAuthAxios(navigate),[navigate]);// 將 fetchUserData 包裝在 useCallback 中以記憶化函數\nconst fetchUserData=useCallback(async()=>{try{setIsLoading(true);const token=localStorage.getItem('userToken');console.log('當前 token:',token?'存在':'不存在');// 獲取用戶基本資料 - 使用 authAxios 替代直接的 axios\nconst userResponse=await authAxios.get(`${AUTH_SERVICE_URL}/api/v1/user/`);console.log('用戶資料回應:',userResponse.data);setUser(userResponse.data);// 使用 API 返回的數據更新用戶資料\n// 獲取用戶偏好設定 - 使用 authAxios 替代直接的 axios\nconst preferencesResponse=await authAxios.get(`${AUTH_SERVICE_URL}/api/v1/user/preferences`);setPreferencesForm(preferencesResponse.data);// 獲取用戶地址 - 使用 authAxios 替代直接的 axios\nconst addressesResponse=await authAxios.get(`${AUTH_SERVICE_URL}/api/v1/user/addresses`);console.log('地址資料回應:',addressesResponse);setAddresses(addressesResponse.data);// 在成功獲取用戶數據後添加這行\nlocalStorage.setItem('userData',JSON.stringify(userResponse.data));}catch(error){console.error('獲取用戶資料失敗:',error);// 添加更詳細的錯誤處理\nif(error.response){console.error('錯誤狀態:',error.response.status);console.error('錯誤數據:',error.response.data);}}finally{setIsLoading(false);}},[authAxios]);// 添加 authAxios 作為依賴\nuseEffect(()=>{const token=localStorage.getItem('userToken');if(!token){navigate('/login');return;}fetchUserData();},[navigate,fetchUserData]);// 添加 fetchUserData 作為依賴\nconst handleLogout=()=>{localStorage.removeItem('userToken');localStorage.removeItem('refreshToken');// 同時移除 refreshToken\nlocalStorage.removeItem('userData');navigate('/login');};const handlePreferencesSubmit=async()=>{try{// 使用 authAxios 替代直接的 axios\nconst response=await authAxios.put(`${AUTH_SERVICE_URL}/api/v1/user/preferences`,preferencesForm);if(response.data){setSnackbar({open:true,message:'偏好設定已更新成功！',severity:'success'});}}catch(error){console.error('更新偏好設定失敗:',error);setSnackbar({open:true,message:'更新偏好設定失敗，請稍後再試',severity:'error'});}};const handleAddressClick=(address,index)=>{setAddressForm(address);setEditingAddressIndex(index);setOpenAddressDialog(true);};const handleAddNewAddress=()=>{setAddressForm({name:'',phone:'',postal_code:'',city:'',district:'',street:'',is_default:false});setEditingAddressIndex(null);setOpenAddressDialog(true);};const handleAddressClose=()=>{setOpenAddressDialog(false);setEditingAddressIndex(null);};const handleAddressMenuClick=(event,address)=>{event.stopPropagation();setAnchorEl(event.currentTarget);setSelectedAddress(address);};const handleAddressMenuClose=()=>{setAnchorEl(null);setSelectedAddress(null);};const handleEditAddress=()=>{handleAddressMenuClose();const addressIndex=addresses.findIndex(addr=>addr.id===selectedAddress.id);handleAddressClick(selectedAddress,addressIndex);};const handleDeleteAddress=async()=>{try{// 使用 authAxios 替代直接的 axios\nawait authAxios.delete(`${AUTH_SERVICE_URL}/api/v1/user/addresses/${selectedAddress.id}`);await fetchUserData();setSnackbar({open:true,message:'地址已成功刪除！',severity:'success'});}catch(error){console.error('刪除地址失敗:',error);setSnackbar({open:true,message:'刪除地址失敗，請稍後再試',severity:'error'});}handleAddressMenuClose();setDeleteConfirmOpen(false);};const handleAddressSubmit=async()=>{try{let response;if(editingAddressIndex!==null){// 更新現有地址 - 使用 authAxios 替代直接的 axios\nresponse=await authAxios.put(`${AUTH_SERVICE_URL}/api/v1/user/addresses/${addresses[editingAddressIndex].id}`,addressForm);}else{// 新增地址 - 使用 authAxios 替代直接的 axios\nresponse=await authAxios.post(`${AUTH_SERVICE_URL}/api/v1/user/addresses`,addressForm);}if(response.data){await fetchUserData();setOpenAddressDialog(false);setSnackbar({open:true,message:`地址已成功${editingAddressIndex!==null?'更新':'新增'}！`,severity:'success'});}}catch(error){console.error('更新地址失敗:',error);setSnackbar({open:true,message:`${editingAddressIndex!==null?'更新':'新增'}地址失敗，請稍後再試`,severity:'error'});}};const handleResetPasswordOpen=()=>{setResetPasswordDialog(true);};const handleResetPasswordClose=()=>{setResetPasswordDialog(false);setResetPasswordForm({newPassword:'',confirmPassword:''});};const handleResetPasswordSubmit=async()=>{try{const{newPassword,confirmPassword}=resetPasswordForm;if(newPassword!==confirmPassword){setSnackbar({open:true,message:'新密碼與確認密碼不符',severity:'error'});return;}if(newPassword.length<6){setSnackbar({open:true,message:'密碼長度至少需要6個字符',severity:'error'});return;}const response=await authAxios.post(`${AUTH_SERVICE_URL}/api/v1/auth/reset-password`,resetPasswordForm);setSnackbar({open:true,message:'密碼重置成功！',severity:'success'});handleResetPasswordClose();}catch(error){var _error$response,_error$response$data;setSnackbar({open:true,message:((_error$response=error.response)===null||_error$response===void 0?void 0:(_error$response$data=_error$response.data)===null||_error$response$data===void 0?void 0:_error$response$data.error)||'密碼重置失敗，請稍後再試',severity:'error'});}};if(isLoading){return/*#__PURE__*/_jsx(Box,{sx:{display:'flex',justifyContent:'center',alignItems:'center',minHeight:'100vh',backgroundColor:'background.default'},children:/*#__PURE__*/_jsx(CircularProgress,{size:60,thickness:4})});}if(!user){return/*#__PURE__*/_jsxs(Box,{sx:{display:'flex',justifyContent:'center',alignItems:'center',minHeight:'100vh',flexDirection:'column',gap:2},children:[/*#__PURE__*/_jsx(Typography,{variant:\"h6\",color:\"text.secondary\",children:\"\\u7121\\u6CD5\\u8F09\\u5165\\u7528\\u6236\\u8CC7\\u6599\"}),/*#__PURE__*/_jsx(Button,{variant:\"contained\",onClick:()=>navigate('/login'),children:\"\\u91CD\\u65B0\\u767B\\u5165\"})]});}return/*#__PURE__*/_jsxs(Container,{maxWidth:\"lg\",sx:{mt:4,mb:4},children:[/*#__PURE__*/_jsxs(Paper,{elevation:3,sx:{p:3,mb:3},children:[/*#__PURE__*/_jsxs(Box,{sx:{display:'flex',justifyContent:'space-between',alignItems:'flex-start',mb:4},children:[/*#__PURE__*/_jsxs(Box,{sx:{display:'flex',alignItems:'center'},children:[/*#__PURE__*/_jsx(Avatar,{sx:{width:100,height:100,mr:3,bgcolor:'primary.main',fontSize:'2rem'},children:(_user$username=user.username)===null||_user$username===void 0?void 0:(_user$username$=_user$username[0])===null||_user$username$===void 0?void 0:_user$username$.toUpperCase()}),/*#__PURE__*/_jsxs(Box,{children:[/*#__PURE__*/_jsx(Typography,{variant:\"h4\",gutterBottom:true,children:user.username}),/*#__PURE__*/_jsx(Typography,{variant:\"subtitle1\",color:\"text.secondary\",children:user.email})]})]}),/*#__PURE__*/_jsxs(Box,{children:[/*#__PURE__*/_jsx(IconButton,{color:\"primary\",onClick:handleResetPasswordOpen,sx:{mr:1,bgcolor:'action.hover','&:hover':{bgcolor:'primary.light'}},children:/*#__PURE__*/_jsx(LockResetIcon,{})}),/*#__PURE__*/_jsx(IconButton,{color:\"error\",onClick:handleLogout,sx:{bgcolor:'action.hover','&:hover':{bgcolor:'error.light'}},children:/*#__PURE__*/_jsx(LogoutIcon,{})})]})]}),/*#__PURE__*/_jsxs(List,{sx:{bgcolor:'background.paper',borderRadius:1},children:[/*#__PURE__*/_jsxs(ListItem,{children:[/*#__PURE__*/_jsx(ListItemIcon,{children:/*#__PURE__*/_jsx(PersonIcon,{})}),/*#__PURE__*/_jsx(ListItemText,{primary:\"\\u6703\\u54E1\\u89D2\\u8272\",secondary:user.role==='admin'?'管理員':'一般會員'})]}),/*#__PURE__*/_jsx(Divider,{component:\"li\"}),/*#__PURE__*/_jsxs(ListItem,{children:[/*#__PURE__*/_jsx(ListItemIcon,{children:/*#__PURE__*/_jsx(VerifiedUserIcon,{})}),/*#__PURE__*/_jsx(ListItemText,{primary:\"\\u5E33\\u865F\\u72C0\\u614B\",secondary:user.status==='active'?'正常':'停用'})]}),/*#__PURE__*/_jsx(Divider,{component:\"li\"}),/*#__PURE__*/_jsxs(ListItem,{children:[/*#__PURE__*/_jsx(ListItemIcon,{children:/*#__PURE__*/_jsx(CalendarTodayIcon,{})}),/*#__PURE__*/_jsx(ListItemText,{primary:\"\\u8A3B\\u518A\\u6642\\u9593\",secondary:new Date(user.created_at).toLocaleString()})]})]})]}),/*#__PURE__*/_jsxs(Paper,{elevation:3,sx:{p:3,mb:3},children:[/*#__PURE__*/_jsxs(Box,{sx:{display:'flex',justifyContent:'space-between',alignItems:'center',mb:2},children:[/*#__PURE__*/_jsxs(Box,{sx:{display:'flex',alignItems:'center',gap:1},children:[/*#__PURE__*/_jsx(SettingsIcon,{color:\"primary\"}),/*#__PURE__*/_jsx(Typography,{variant:\"h5\",sx:{fontWeight:'medium'},children:\"\\u500B\\u4EBA\\u5316\\u8A2D\\u5B9A\"})]}),/*#__PURE__*/_jsx(Button,{variant:\"contained\",color:\"primary\",onClick:handlePreferencesSubmit,startIcon:/*#__PURE__*/_jsx(SaveIcon,{}),size:\"small\",children:\"\\u5132\\u5B58\\u8A2D\\u5B9A\"})]}),/*#__PURE__*/_jsx(Grid,{container:true,spacing:2,children:[{icon:/*#__PURE__*/_jsx(LanguageIcon,{}),title:'語言',value:preferencesForm.language,options:[{value:'zh_TW',label:'繁體中文'},{value:'en',label:'English'}],onChange:e=>setPreferencesForm({...preferencesForm,language:e.target.value})},{icon:/*#__PURE__*/_jsx(LanguageIcon,{}),title:'幣別',value:preferencesForm.currency,options:[{value:'TWD',label:'新台幣 (TWD)'},{value:'USD',label:'美元 (USD)'}],onChange:e=>setPreferencesForm({...preferencesForm,currency:e.target.value})},{icon:/*#__PURE__*/_jsx(LanguageIcon,{}),title:'主題',value:preferencesForm.theme,options:[{value:'light',label:'淺色'},{value:'dark',label:'深色'}],onChange:e=>setPreferencesForm({...preferencesForm,theme:e.target.value})},{icon:/*#__PURE__*/_jsx(LanguageIcon,{}),title:'通知設定',value:preferencesForm.notification_email.toString(),options:[{value:'true',label:'啟用'},{value:'false',label:'停用'}],onChange:e=>{const newValue=e.target.value==='true';setPreferencesForm(prev=>({...prev,notification_email:newValue}));}}].map((setting,index)=>/*#__PURE__*/_jsx(Grid,{item:true,xs:12,sm:6,md:3,children:/*#__PURE__*/_jsx(Card,{sx:{height:'100%'},children:/*#__PURE__*/_jsxs(CardContent,{children:[/*#__PURE__*/_jsxs(Box,{sx:{display:'flex',alignItems:'center',gap:1,mb:2},children:[setting.icon,/*#__PURE__*/_jsx(Typography,{variant:\"subtitle1\",children:setting.title})]}),/*#__PURE__*/_jsx(TextField,{select:true,fullWidth:true,size:\"small\",value:setting.value,onChange:setting.onChange,SelectProps:{native:true},children:setting.options.map(option=>/*#__PURE__*/_jsx(\"option\",{value:option.value,children:option.label},option.value))})]})})},index))})]}),/*#__PURE__*/_jsxs(Paper,{elevation:3,sx:{p:3},children:[/*#__PURE__*/_jsxs(Box,{sx:{display:'flex',justifyContent:'space-between',alignItems:'center',mb:2},children:[/*#__PURE__*/_jsxs(Box,{sx:{display:'flex',alignItems:'center',gap:1},children:[/*#__PURE__*/_jsx(LocationOnIcon,{color:\"primary\"}),/*#__PURE__*/_jsx(Typography,{variant:\"h5\",sx:{fontWeight:'medium'},children:\"\\u6536\\u8CA8\\u5730\\u5740\"})]}),/*#__PURE__*/_jsx(Button,{variant:\"contained\",color:\"primary\",onClick:handleAddNewAddress,startIcon:/*#__PURE__*/_jsx(AddIcon,{}),size:\"small\",children:\"\\u65B0\\u589E\\u5730\\u5740\"})]}),/*#__PURE__*/_jsx(Grid,{container:true,spacing:2,children:addresses.length>0?addresses.map((address,index)=>/*#__PURE__*/_jsx(Grid,{item:true,xs:12,sm:6,md:4,children:/*#__PURE__*/_jsx(Card,{sx:{cursor:'pointer',transition:'all 0.3s','&:hover':{transform:'translateY(-4px)',boxShadow:3}},children:/*#__PURE__*/_jsxs(CardContent,{children:[/*#__PURE__*/_jsxs(Box,{sx:{display:'flex',justifyContent:'space-between',alignItems:'center',mb:1},children:[/*#__PURE__*/_jsx(Typography,{variant:\"h6\",children:address.name}),/*#__PURE__*/_jsxs(Box,{sx:{display:'flex',alignItems:'center',gap:1},children:[address.is_default&&/*#__PURE__*/_jsx(Chip,{label:\"\\u9810\\u8A2D\",color:\"primary\",size:\"small\"}),/*#__PURE__*/_jsx(IconButton,{size:\"small\",onClick:e=>handleAddressMenuClick(e,address),children:/*#__PURE__*/_jsx(MoreVertIcon,{})})]})]}),/*#__PURE__*/_jsx(Typography,{variant:\"body2\",sx:{mb:1},children:address.phone}),/*#__PURE__*/_jsxs(Typography,{color:\"text.secondary\",variant:\"body2\",children:[address.postal_code,\" \",address.city,address.district,address.street]})]})})},index)):/*#__PURE__*/_jsx(Grid,{item:true,xs:12,children:/*#__PURE__*/_jsxs(Box,{sx:{textAlign:'center',py:4,bgcolor:'background.paper',borderRadius:1},children:[/*#__PURE__*/_jsx(LocationOffIcon,{sx:{fontSize:48,color:'text.secondary',mb:2}}),/*#__PURE__*/_jsx(Typography,{color:\"text.secondary\",children:\"\\u5C1A\\u672A\\u65B0\\u589E\\u5730\\u5740\"})]})})})]}),/*#__PURE__*/_jsxs(Dialog,{open:openAddressDialog,onClose:handleAddressClose,maxWidth:\"sm\",fullWidth:true,children:[/*#__PURE__*/_jsx(DialogTitle,{children:editingAddressIndex!==null?'編輯地址':'新增地址'}),/*#__PURE__*/_jsx(DialogContent,{children:/*#__PURE__*/_jsx(Box,{sx:{mt:2},children:/*#__PURE__*/_jsxs(Grid,{container:true,spacing:2,children:[/*#__PURE__*/_jsx(Grid,{item:true,xs:12,sm:6,children:/*#__PURE__*/_jsx(TextField,{required:true,margin:\"dense\",label:\"\\u5730\\u5740\\u540D\\u7A31\",placeholder:\"\\u4F8B\\uFF1A\\u516C\\u53F8\\u3001\\u5BB6\",fullWidth:true,value:addressForm.name,onChange:e=>setAddressForm({...addressForm,name:e.target.value})})}),/*#__PURE__*/_jsx(Grid,{item:true,xs:12,sm:6,children:/*#__PURE__*/_jsx(TextField,{required:true,margin:\"dense\",label:\"\\u806F\\u7D61\\u96FB\\u8A71\",fullWidth:true,value:addressForm.phone,onChange:e=>setAddressForm({...addressForm,phone:e.target.value})})}),/*#__PURE__*/_jsx(Grid,{item:true,xs:12,sm:6,children:/*#__PURE__*/_jsx(TextField,{required:true,margin:\"dense\",label:\"\\u90F5\\u905E\\u5340\\u865F\",fullWidth:true,value:addressForm.postal_code,onChange:e=>setAddressForm({...addressForm,postal_code:e.target.value})})}),/*#__PURE__*/_jsx(Grid,{item:true,xs:12,sm:6,children:/*#__PURE__*/_jsx(TextField,{required:true,margin:\"dense\",label:\"\\u57CE\\u5E02\",fullWidth:true,value:addressForm.city,onChange:e=>setAddressForm({...addressForm,city:e.target.value})})}),/*#__PURE__*/_jsx(Grid,{item:true,xs:12,sm:6,children:/*#__PURE__*/_jsx(TextField,{required:true,margin:\"dense\",label:\"\\u5340\\u57DF\",fullWidth:true,value:addressForm.district,onChange:e=>setAddressForm({...addressForm,district:e.target.value})})}),/*#__PURE__*/_jsx(Grid,{item:true,xs:12,children:/*#__PURE__*/_jsx(TextField,{required:true,margin:\"dense\",label:\"\\u8857\\u9053\\u5730\\u5740\",fullWidth:true,value:addressForm.street,onChange:e=>setAddressForm({...addressForm,street:e.target.value})})}),/*#__PURE__*/_jsx(Grid,{item:true,xs:12,children:/*#__PURE__*/_jsx(FormControlLabel,{control:/*#__PURE__*/_jsx(Switch,{checked:addressForm.is_default,onChange:e=>setAddressForm({...addressForm,is_default:e.target.checked})}),label:\"\\u8A2D\\u70BA\\u9810\\u8A2D\\u5730\\u5740\"})})]})})}),/*#__PURE__*/_jsxs(DialogActions,{children:[/*#__PURE__*/_jsx(Button,{onClick:handleAddressClose,children:\"\\u53D6\\u6D88\"}),/*#__PURE__*/_jsx(Button,{onClick:handleAddressSubmit,variant:\"contained\",children:\"\\u5132\\u5B58\"})]})]}),/*#__PURE__*/_jsxs(Menu,{anchorEl:anchorEl,open:Boolean(anchorEl),onClose:handleAddressMenuClose,children:[/*#__PURE__*/_jsxs(MenuItem,{onClick:handleEditAddress,children:[/*#__PURE__*/_jsx(EditIcon,{fontSize:\"small\",sx:{mr:1}}),\"\\u7DE8\\u8F2F\\u5730\\u5740\"]}),/*#__PURE__*/_jsxs(MenuItem,{onClick:()=>setDeleteConfirmOpen(true),sx:{color:'error.main'},children:[/*#__PURE__*/_jsx(DeleteIcon,{fontSize:\"small\",sx:{mr:1}}),\"\\u522A\\u9664\\u5730\\u5740\"]})]}),/*#__PURE__*/_jsxs(Dialog,{open:deleteConfirmOpen,onClose:()=>setDeleteConfirmOpen(false),children:[/*#__PURE__*/_jsx(DialogTitle,{children:\"\\u78BA\\u8A8D\\u522A\\u9664\\u5730\\u5740\"}),/*#__PURE__*/_jsx(DialogContent,{children:/*#__PURE__*/_jsx(Typography,{children:\"\\u78BA\\u5B9A\\u8981\\u522A\\u9664\\u9019\\u500B\\u5730\\u5740\\u55CE\\uFF1F\\u6B64\\u64CD\\u4F5C\\u7121\\u6CD5\\u5FA9\\u539F\\u3002\"})}),/*#__PURE__*/_jsxs(DialogActions,{children:[/*#__PURE__*/_jsx(Button,{onClick:()=>setDeleteConfirmOpen(false),children:\"\\u53D6\\u6D88\"}),/*#__PURE__*/_jsx(Button,{onClick:handleDeleteAddress,color:\"error\",variant:\"contained\",children:\"\\u522A\\u9664\"})]})]}),/*#__PURE__*/_jsxs(Dialog,{open:resetPasswordDialog,onClose:handleResetPasswordClose,maxWidth:\"sm\",fullWidth:true,children:[/*#__PURE__*/_jsx(DialogTitle,{children:\"\\u91CD\\u7F6E\\u5BC6\\u78BC\"}),/*#__PURE__*/_jsx(DialogContent,{children:/*#__PURE__*/_jsx(Box,{sx:{mt:2},children:/*#__PURE__*/_jsxs(Grid,{container:true,spacing:2,children:[/*#__PURE__*/_jsx(Grid,{item:true,xs:12,children:/*#__PURE__*/_jsx(TextField,{required:true,margin:\"dense\",label:\"\\u65B0\\u5BC6\\u78BC\",type:showPassword.newPassword?\"text\":\"password\",fullWidth:true,value:resetPasswordForm.newPassword,onChange:e=>setResetPasswordForm({...resetPasswordForm,newPassword:e.target.value}),InputProps:{endAdornment:/*#__PURE__*/_jsx(IconButton,{onClick:()=>setShowPassword({...showPassword,newPassword:!showPassword.newPassword}),edge:\"end\",children:showPassword.newPassword?/*#__PURE__*/_jsx(VisibilityOffIcon,{}):/*#__PURE__*/_jsx(VisibilityIcon,{})})}})}),/*#__PURE__*/_jsx(Grid,{item:true,xs:12,children:/*#__PURE__*/_jsx(TextField,{required:true,margin:\"dense\",label:\"\\u78BA\\u8A8D\\u65B0\\u5BC6\\u78BC\",type:showPassword.confirmPassword?\"text\":\"password\",fullWidth:true,value:resetPasswordForm.confirmPassword,onChange:e=>setResetPasswordForm({...resetPasswordForm,confirmPassword:e.target.value}),InputProps:{endAdornment:/*#__PURE__*/_jsx(IconButton,{onClick:()=>setShowPassword({...showPassword,confirmPassword:!showPassword.confirmPassword}),edge:\"end\",children:showPassword.confirmPassword?/*#__PURE__*/_jsx(VisibilityOffIcon,{}):/*#__PURE__*/_jsx(VisibilityIcon,{})})}})})]})})}),/*#__PURE__*/_jsxs(DialogActions,{children:[/*#__PURE__*/_jsx(Button,{onClick:handleResetPasswordClose,children:\"\\u53D6\\u6D88\"}),/*#__PURE__*/_jsx(Button,{onClick:handleResetPasswordSubmit,variant:\"contained\",children:\"\\u78BA\\u8A8D\\u91CD\\u7F6E\"})]})]}),/*#__PURE__*/_jsx(Snackbar,{open:snackbar.open,autoHideDuration:2000,onClose:()=>setSnackbar({...snackbar,open:false}),anchorOrigin:{vertical:'top',horizontal:'center'},children:/*#__PURE__*/_jsx(Alert,{onClose:()=>setSnackbar({...snackbar,open:false}),severity:snackbar.severity,sx:{width:'100%'},children:snackbar.message})})]});};export default Profile;","map":{"version":3,"names":["React","useState","useEffect","useMemo","useCallback","Container","Paper","Typography","Box","Avatar","List","ListItem","ListItemText","Divider","Button","Dialog","DialogTitle","DialogContent","DialogActions","TextField","Grid","Switch","FormControlLabel","IconButton","Card","CardContent","ListItemIcon","Chip","Snackbar","Alert","Menu","MenuItem","CircularProgress","useNavigate","SaveIcon","AddIcon","LogoutIcon","SettingsIcon","PersonIcon","VerifiedUserIcon","CalendarTodayIcon","LanguageIcon","LocationOnIcon","LocationOffIcon","MoreVertIcon","DeleteIcon","EditIcon","LockResetIcon","VisibilityIcon","VisibilityOffIcon","createAuthAxios","jsx","_jsx","jsxs","_jsxs","AUTH_SERVICE_URL","process","env","Profile","_user$username","_user$username$","navigate","user","setUser","addresses","setAddresses","preferencesForm","setPreferencesForm","language","currency","theme","notification_email","notification_sms","openAddressDialog","setOpenAddressDialog","addressForm","setAddressForm","name","phone","postal_code","city","district","street","is_default","editingAddressIndex","setEditingAddressIndex","snackbar","setSnackbar","open","message","severity","anchorEl","setAnchorEl","selectedAddress","setSelectedAddress","deleteConfirmOpen","setDeleteConfirmOpen","isLoading","setIsLoading","resetPasswordDialog","setResetPasswordDialog","resetPasswordForm","setResetPasswordForm","newPassword","confirmPassword","showPassword","setShowPassword","authAxios","fetchUserData","token","localStorage","getItem","console","log","userResponse","get","data","preferencesResponse","addressesResponse","setItem","JSON","stringify","error","response","status","handleLogout","removeItem","handlePreferencesSubmit","put","handleAddressClick","address","index","handleAddNewAddress","handleAddressClose","handleAddressMenuClick","event","stopPropagation","currentTarget","handleAddressMenuClose","handleEditAddress","addressIndex","findIndex","addr","id","handleDeleteAddress","delete","handleAddressSubmit","post","handleResetPasswordOpen","handleResetPasswordClose","handleResetPasswordSubmit","length","_error$response","_error$response$data","sx","display","justifyContent","alignItems","minHeight","backgroundColor","children","size","thickness","flexDirection","gap","variant","color","onClick","maxWidth","mt","mb","elevation","p","width","height","mr","bgcolor","fontSize","username","toUpperCase","gutterBottom","email","borderRadius","primary","secondary","role","component","Date","created_at","toLocaleString","fontWeight","startIcon","container","spacing","icon","title","value","options","label","onChange","e","target","toString","newValue","prev","map","setting","item","xs","sm","md","select","fullWidth","SelectProps","native","option","cursor","transition","transform","boxShadow","textAlign","py","onClose","required","margin","placeholder","control","checked","Boolean","type","InputProps","endAdornment","edge","autoHideDuration","anchorOrigin","vertical","horizontal"],"sources":["/Users/sumingkai/Documents/OrderManagerSystem/frontend/src/pages/Store/Profile.js"],"sourcesContent":["import React, { useState, useEffect, useMemo, useCallback } from 'react';\nimport {\n    Container,\n    Paper,\n    Typography,\n    Box,\n    Avatar,\n    List,\n    ListItem,\n    ListItemText,\n    Divider,\n    Button,\n    Dialog,\n    DialogTitle,\n    DialogContent,\n    DialogActions,\n    TextField,\n    Grid,\n    Switch,\n    FormControlLabel,\n    IconButton,\n    Card,\n    CardContent,\n    ListItemIcon,\n    Chip,\n    Snackbar,\n    Alert,\n    Menu,\n    MenuItem,\n    CircularProgress,\n} from '@mui/material';\nimport { useNavigate } from 'react-router-dom';\nimport SaveIcon from '@mui/icons-material/Save';\nimport AddIcon from '@mui/icons-material/Add';\nimport LogoutIcon from '@mui/icons-material/Logout';\nimport SettingsIcon from '@mui/icons-material/Settings';\nimport PersonIcon from '@mui/icons-material/Person';\nimport VerifiedUserIcon from '@mui/icons-material/VerifiedUser';\nimport CalendarTodayIcon from '@mui/icons-material/CalendarToday';\nimport LanguageIcon from '@mui/icons-material/Language';\nimport LocationOnIcon from '@mui/icons-material/LocationOn';\nimport LocationOffIcon from '@mui/icons-material/LocationOff';\nimport MoreVertIcon from '@mui/icons-material/MoreVert';\nimport DeleteIcon from '@mui/icons-material/Delete';\nimport EditIcon from '@mui/icons-material/Edit';\nimport LockResetIcon from '@mui/icons-material/LockReset';\nimport VisibilityIcon from '@mui/icons-material/Visibility';\nimport VisibilityOffIcon from '@mui/icons-material/VisibilityOff';\nimport { createAuthAxios } from '../../utils/auth';\n\nconst AUTH_SERVICE_URL = process.env.AUTH_SERVICE_URL || 'https://ordermanagersystem-auth-service.onrender.com';\n\nconst Profile = () => {\n    const navigate = useNavigate();\n    const [user, setUser] = useState(null);\n    const [addresses, setAddresses] = useState([]);\n    const [preferencesForm, setPreferencesForm] = useState({\n        language: 'zh_TW',\n        currency: 'TWD',\n        theme: 'light',\n        notification_email: true,\n        notification_sms: false\n    });\n    const [openAddressDialog, setOpenAddressDialog] = useState(false);\n    const [addressForm, setAddressForm] = useState({\n        name: '',\n        phone: '',\n        postal_code: '',\n        city: '',\n        district: '',\n        street: '',\n        is_default: false\n    });\n    const [editingAddressIndex, setEditingAddressIndex] = useState(null);\n    const [snackbar, setSnackbar] = useState({\n        open: false,\n        message: '',\n        severity: 'success'\n    });\n    const [anchorEl, setAnchorEl] = useState(null);\n    const [selectedAddress, setSelectedAddress] = useState(null);\n    const [deleteConfirmOpen, setDeleteConfirmOpen] = useState(false);\n    const [isLoading, setIsLoading] = useState(true);\n    const [resetPasswordDialog, setResetPasswordDialog] = useState(false);\n    const [resetPasswordForm, setResetPasswordForm] = useState({\n        newPassword: '',\n        confirmPassword: ''\n    });\n    const [showPassword, setShowPassword] = useState({\n        newPassword: false,\n        confirmPassword: false\n    });\n\n    // 使用 useMemo 創建 authAxios 實例，避免每次重新渲染都創建新實例\n    const authAxios = useMemo(() => createAuthAxios(navigate), [navigate]);\n\n    // 將 fetchUserData 包裝在 useCallback 中以記憶化函數\n    const fetchUserData = useCallback(async () => {\n        try {\n            setIsLoading(true);\n            const token = localStorage.getItem('userToken');\n            console.log('當前 token:', token ? '存在' : '不存在');\n\n            // 獲取用戶基本資料 - 使用 authAxios 替代直接的 axios\n            const userResponse = await authAxios.get(`${AUTH_SERVICE_URL}/api/v1/user/`);\n            console.log('用戶資料回應:', userResponse.data);\n            setUser(userResponse.data); // 使用 API 返回的數據更新用戶資料\n\n            // 獲取用戶偏好設定 - 使用 authAxios 替代直接的 axios\n            const preferencesResponse = await authAxios.get(`${AUTH_SERVICE_URL}/api/v1/user/preferences`);\n            setPreferencesForm(preferencesResponse.data);\n\n            // 獲取用戶地址 - 使用 authAxios 替代直接的 axios\n            const addressesResponse = await authAxios.get(`${AUTH_SERVICE_URL}/api/v1/user/addresses`);\n            console.log('地址資料回應:', addressesResponse);\n            setAddresses(addressesResponse.data);\n\n            // 在成功獲取用戶數據後添加這行\n            localStorage.setItem('userData', JSON.stringify(userResponse.data));\n        } catch (error) {\n            console.error('獲取用戶資料失敗:', error);\n            // 添加更詳細的錯誤處理\n            if (error.response) {\n                console.error('錯誤狀態:', error.response.status);\n                console.error('錯誤數據:', error.response.data);\n            }\n        } finally {\n            setIsLoading(false);\n        }\n    }, [authAxios]); // 添加 authAxios 作為依賴\n\n    useEffect(() => {\n        const token = localStorage.getItem('userToken');\n        if (!token) {\n            navigate('/login');\n            return;\n        }\n\n        fetchUserData();\n    }, [navigate, fetchUserData]); // 添加 fetchUserData 作為依賴\n\n    const handleLogout = () => {\n        localStorage.removeItem('userToken');\n        localStorage.removeItem('refreshToken'); // 同時移除 refreshToken\n        localStorage.removeItem('userData');\n        navigate('/login');\n    };\n\n    const handlePreferencesSubmit = async () => {\n        try {\n            // 使用 authAxios 替代直接的 axios\n            const response = await authAxios.put(\n                `${AUTH_SERVICE_URL}/api/v1/user/preferences`,\n                preferencesForm\n            );\n\n            if (response.data) {\n                setSnackbar({\n                    open: true,\n                    message: '偏好設定已更新成功！',\n                    severity: 'success'\n                });\n            }\n        } catch (error) {\n            console.error('更新偏好設定失敗:', error);\n            setSnackbar({\n                open: true,\n                message: '更新偏好設定失敗，請稍後再試',\n                severity: 'error'\n            });\n        }\n    };\n\n    const handleAddressClick = (address, index) => {\n        setAddressForm(address);\n        setEditingAddressIndex(index);\n        setOpenAddressDialog(true);\n    };\n\n    const handleAddNewAddress = () => {\n        setAddressForm({\n            name: '',\n            phone: '',\n            postal_code: '',\n            city: '',\n            district: '',\n            street: '',\n            is_default: false\n        });\n        setEditingAddressIndex(null);\n        setOpenAddressDialog(true);\n    };\n\n    const handleAddressClose = () => {\n        setOpenAddressDialog(false);\n        setEditingAddressIndex(null);\n    };\n\n    const handleAddressMenuClick = (event, address) => {\n        event.stopPropagation();\n        setAnchorEl(event.currentTarget);\n        setSelectedAddress(address);\n    };\n\n    const handleAddressMenuClose = () => {\n        setAnchorEl(null);\n        setSelectedAddress(null);\n    };\n\n    const handleEditAddress = () => {\n        handleAddressMenuClose();\n        const addressIndex = addresses.findIndex(addr => addr.id === selectedAddress.id);\n        handleAddressClick(selectedAddress, addressIndex);\n    };\n\n    const handleDeleteAddress = async () => {\n        try {\n            // 使用 authAxios 替代直接的 axios\n            await authAxios.delete(\n                `${AUTH_SERVICE_URL}/api/v1/user/addresses/${selectedAddress.id}`\n            );\n\n            await fetchUserData();\n            setSnackbar({\n                open: true,\n                message: '地址已成功刪除！',\n                severity: 'success'\n            });\n        } catch (error) {\n            console.error('刪除地址失敗:', error);\n            setSnackbar({\n                open: true,\n                message: '刪除地址失敗，請稍後再試',\n                severity: 'error'\n            });\n        }\n        handleAddressMenuClose();\n        setDeleteConfirmOpen(false);\n    };\n\n    const handleAddressSubmit = async () => {\n        try {\n            let response;\n            if (editingAddressIndex !== null) {\n                // 更新現有地址 - 使用 authAxios 替代直接的 axios\n                response = await authAxios.put(\n                    `${AUTH_SERVICE_URL}/api/v1/user/addresses/${addresses[editingAddressIndex].id}`,\n                    addressForm\n                );\n            } else {\n                // 新增地址 - 使用 authAxios 替代直接的 axios\n                response = await authAxios.post(\n                    `${AUTH_SERVICE_URL}/api/v1/user/addresses`,\n                    addressForm\n                );\n            }\n\n            if (response.data) {\n                await fetchUserData();\n                setOpenAddressDialog(false);\n                setSnackbar({\n                    open: true,\n                    message: `地址已成功${editingAddressIndex !== null ? '更新' : '新增'}！`,\n                    severity: 'success'\n                });\n            }\n        } catch (error) {\n            console.error('更新地址失敗:', error);\n            setSnackbar({\n                open: true,\n                message: `${editingAddressIndex !== null ? '更新' : '新增'}地址失敗，請稍後再試`,\n                severity: 'error'\n            });\n        }\n    };\n\n    const handleResetPasswordOpen = () => {\n        setResetPasswordDialog(true);\n    };\n\n    const handleResetPasswordClose = () => {\n        setResetPasswordDialog(false);\n        setResetPasswordForm({\n            newPassword: '',\n            confirmPassword: ''\n        });\n    };\n\n    const handleResetPasswordSubmit = async () => {\n        try {\n            const { newPassword, confirmPassword } = resetPasswordForm;\n\n            if (newPassword !== confirmPassword) {\n                setSnackbar({\n                    open: true,\n                    message: '新密碼與確認密碼不符',\n                    severity: 'error'\n                });\n                return;\n            }\n\n            if (newPassword.length < 6) {\n                setSnackbar({\n                    open: true,\n                    message: '密碼長度至少需要6個字符',\n                    severity: 'error'\n                });\n                return;\n            }\n\n            const response = await authAxios.post(\n                `${AUTH_SERVICE_URL}/api/v1/auth/reset-password`,\n                resetPasswordForm\n            );\n\n            setSnackbar({\n                open: true,\n                message: '密碼重置成功！',\n                severity: 'success'\n            });\n            handleResetPasswordClose();\n        } catch (error) {\n            setSnackbar({\n                open: true,\n                message: error.response?.data?.error || '密碼重置失敗，請稍後再試',\n                severity: 'error'\n            });\n        }\n    };\n\n    if (isLoading) {\n        return (\n            <Box\n                sx={{\n                    display: 'flex',\n                    justifyContent: 'center',\n                    alignItems: 'center',\n                    minHeight: '100vh',\n                    backgroundColor: 'background.default'\n                }}\n            >\n                <CircularProgress size={60} thickness={4} />\n            </Box>\n        );\n    }\n\n    if (!user) {\n        return (\n            <Box\n                sx={{\n                    display: 'flex',\n                    justifyContent: 'center',\n                    alignItems: 'center',\n                    minHeight: '100vh',\n                    flexDirection: 'column',\n                    gap: 2\n                }}\n            >\n                <Typography variant=\"h6\" color=\"text.secondary\">\n                    無法載入用戶資料\n                </Typography>\n                <Button\n                    variant=\"contained\"\n                    onClick={() => navigate('/login')}\n                >\n                    重新登入\n                </Button>\n            </Box>\n        );\n    }\n\n    return (\n        <Container maxWidth=\"lg\" sx={{ mt: 4, mb: 4 }}>\n            <Paper elevation={3} sx={{ p: 3, mb: 3 }}>\n                <Box sx={{\n                    display: 'flex',\n                    justifyContent: 'space-between',\n                    alignItems: 'flex-start',\n                    mb: 4\n                }}>\n                    <Box sx={{ display: 'flex', alignItems: 'center' }}>\n                        <Avatar\n                            sx={{\n                                width: 100,\n                                height: 100,\n                                mr: 3,\n                                bgcolor: 'primary.main',\n                                fontSize: '2rem',\n                            }}\n                        >\n                            {user.username?.[0]?.toUpperCase()}\n                        </Avatar>\n                        <Box>\n                            <Typography variant=\"h4\" gutterBottom>\n                                {user.username}\n                            </Typography>\n                            <Typography variant=\"subtitle1\" color=\"text.secondary\">\n                                {user.email}\n                            </Typography>\n                        </Box>\n                    </Box>\n\n                    <Box>\n                        <IconButton\n                            color=\"primary\"\n                            onClick={handleResetPasswordOpen}\n                            sx={{\n                                mr: 1,\n                                bgcolor: 'action.hover',\n                                '&:hover': { bgcolor: 'primary.light' }\n                            }}\n                        >\n                            <LockResetIcon />\n                        </IconButton>\n                        <IconButton\n                            color=\"error\"\n                            onClick={handleLogout}\n                            sx={{\n                                bgcolor: 'action.hover',\n                                '&:hover': { bgcolor: 'error.light' }\n                            }}\n                        >\n                            <LogoutIcon />\n                        </IconButton>\n                    </Box>\n                </Box>\n\n                <List sx={{ bgcolor: 'background.paper', borderRadius: 1 }}>\n                    <ListItem>\n                        <ListItemIcon>\n                            <PersonIcon />\n                        </ListItemIcon>\n                        <ListItemText\n                            primary=\"會員角色\"\n                            secondary={user.role === 'admin' ? '管理員' : '一般會員'}\n                        />\n                    </ListItem>\n                    <Divider component=\"li\" />\n                    <ListItem>\n                        <ListItemIcon>\n                            <VerifiedUserIcon />\n                        </ListItemIcon>\n                        <ListItemText\n                            primary=\"帳號狀態\"\n                            secondary={user.status === 'active' ? '正常' : '停用'}\n                        />\n                    </ListItem>\n                    <Divider component=\"li\" />\n                    <ListItem>\n                        <ListItemIcon>\n                            <CalendarTodayIcon />\n                        </ListItemIcon>\n                        <ListItemText\n                            primary=\"註冊時間\"\n                            secondary={new Date(user.created_at).toLocaleString()}\n                        />\n                    </ListItem>\n                </List>\n            </Paper>\n\n            <Paper elevation={3} sx={{ p: 3, mb: 3 }}>\n                <Box sx={{\n                    display: 'flex',\n                    justifyContent: 'space-between',\n                    alignItems: 'center',\n                    mb: 2\n                }}>\n                    <Box sx={{ display: 'flex', alignItems: 'center', gap: 1 }}>\n                        <SettingsIcon color=\"primary\" />\n                        <Typography variant=\"h5\" sx={{ fontWeight: 'medium' }}>\n                            個人化設定\n                        </Typography>\n                    </Box>\n                    <Button\n                        variant=\"contained\"\n                        color=\"primary\"\n                        onClick={handlePreferencesSubmit}\n                        startIcon={<SaveIcon />}\n                        size=\"small\"\n                    >\n                        儲存設定\n                    </Button>\n                </Box>\n\n                <Grid container spacing={2}>\n                    {[\n                        {\n                            icon: <LanguageIcon />,\n                            title: '語言',\n                            value: preferencesForm.language,\n                            options: [\n                                { value: 'zh_TW', label: '繁體中文' },\n                                { value: 'en', label: 'English' }\n                            ],\n                            onChange: (e) => setPreferencesForm({ ...preferencesForm, language: e.target.value })\n                        },\n                        {\n                            icon: <LanguageIcon />,\n                            title: '幣別',\n                            value: preferencesForm.currency,\n                            options: [\n                                { value: 'TWD', label: '新台幣 (TWD)' },\n                                { value: 'USD', label: '美元 (USD)' }\n                            ],\n                            onChange: (e) => setPreferencesForm({ ...preferencesForm, currency: e.target.value })\n                        },\n                        {\n                            icon: <LanguageIcon />,\n                            title: '主題',\n                            value: preferencesForm.theme,\n                            options: [\n                                { value: 'light', label: '淺色' },\n                                { value: 'dark', label: '深色' }\n                            ],\n                            onChange: (e) => setPreferencesForm({ ...preferencesForm, theme: e.target.value })\n                        },\n                        {\n                            icon: <LanguageIcon />,\n                            title: '通知設定',\n                            value: preferencesForm.notification_email.toString(),\n                            options: [\n                                { value: 'true', label: '啟用' },\n                                { value: 'false', label: '停用' }\n                            ],\n                            onChange: (e) => {\n                                const newValue = e.target.value === 'true';\n                                setPreferencesForm(prev => ({\n                                    ...prev,\n                                    notification_email: newValue\n                                }));\n                            }\n                        },\n                    ].map((setting, index) => (\n                        <Grid item xs={12} sm={6} md={3} key={index}>\n                            <Card sx={{ height: '100%' }}>\n                                <CardContent>\n                                    <Box sx={{ display: 'flex', alignItems: 'center', gap: 1, mb: 2 }}>\n                                        {setting.icon}\n                                        <Typography variant=\"subtitle1\">\n                                            {setting.title}\n                                        </Typography>\n                                    </Box>\n                                    <TextField\n                                        select\n                                        fullWidth\n                                        size=\"small\"\n                                        value={setting.value}\n                                        onChange={setting.onChange}\n                                        SelectProps={{ native: true }}\n                                    >\n                                        {setting.options.map(option => (\n                                            <option key={option.value} value={option.value}>\n                                                {option.label}\n                                            </option>\n                                        ))}\n                                    </TextField>\n                                </CardContent>\n                            </Card>\n                        </Grid>\n                    ))}\n                </Grid>\n            </Paper>\n\n            <Paper elevation={3} sx={{ p: 3 }}>\n                <Box sx={{\n                    display: 'flex',\n                    justifyContent: 'space-between',\n                    alignItems: 'center',\n                    mb: 2\n                }}>\n                    <Box sx={{ display: 'flex', alignItems: 'center', gap: 1 }}>\n                        <LocationOnIcon color=\"primary\" />\n                        <Typography variant=\"h5\" sx={{ fontWeight: 'medium' }}>\n                            收貨地址\n                        </Typography>\n                    </Box>\n                    <Button\n                        variant=\"contained\"\n                        color=\"primary\"\n                        onClick={handleAddNewAddress}\n                        startIcon={<AddIcon />}\n                        size=\"small\"\n                    >\n                        新增地址\n                    </Button>\n                </Box>\n\n                <Grid container spacing={2}>\n                    {addresses.length > 0 ? (\n                        addresses.map((address, index) => (\n                            <Grid item xs={12} sm={6} md={4} key={index}>\n                                <Card\n                                    sx={{\n                                        cursor: 'pointer',\n                                        transition: 'all 0.3s',\n                                        '&:hover': {\n                                            transform: 'translateY(-4px)',\n                                            boxShadow: 3\n                                        }\n                                    }}\n                                >\n                                    <CardContent>\n                                        <Box sx={{\n                                            display: 'flex',\n                                            justifyContent: 'space-between',\n                                            alignItems: 'center',\n                                            mb: 1\n                                        }}>\n                                            <Typography variant=\"h6\">\n                                                {address.name}\n                                            </Typography>\n                                            <Box sx={{ display: 'flex', alignItems: 'center', gap: 1 }}>\n                                                {address.is_default && (\n                                                    <Chip\n                                                        label=\"預設\"\n                                                        color=\"primary\"\n                                                        size=\"small\"\n                                                    />\n                                                )}\n                                                <IconButton\n                                                    size=\"small\"\n                                                    onClick={(e) => handleAddressMenuClick(e, address)}\n                                                >\n                                                    <MoreVertIcon />\n                                                </IconButton>\n                                            </Box>\n                                        </Box>\n                                        <Typography variant=\"body2\" sx={{ mb: 1 }}>\n                                            {address.phone}\n                                        </Typography>\n                                        <Typography color=\"text.secondary\" variant=\"body2\">\n                                            {address.postal_code} {address.city}{address.district}{address.street}\n                                        </Typography>\n                                    </CardContent>\n                                </Card>\n                            </Grid>\n                        ))\n                    ) : (\n                        <Grid item xs={12}>\n                            <Box\n                                sx={{\n                                    textAlign: 'center',\n                                    py: 4,\n                                    bgcolor: 'background.paper',\n                                    borderRadius: 1\n                                }}\n                            >\n                                <LocationOffIcon sx={{ fontSize: 48, color: 'text.secondary', mb: 2 }} />\n                                <Typography color=\"text.secondary\">\n                                    尚未新增地址\n                                </Typography>\n                            </Box>\n                        </Grid>\n                    )}\n                </Grid>\n            </Paper>\n\n            <Dialog open={openAddressDialog} onClose={handleAddressClose} maxWidth=\"sm\" fullWidth>\n                <DialogTitle>\n                    {editingAddressIndex !== null ? '編輯地址' : '新增地址'}\n                </DialogTitle>\n                <DialogContent>\n                    <Box sx={{ mt: 2 }}>\n                        <Grid container spacing={2}>\n                            <Grid item xs={12} sm={6}>\n                                <TextField\n                                    required\n                                    margin=\"dense\"\n                                    label=\"地址名稱\"\n                                    placeholder=\"例：公司、家\"\n                                    fullWidth\n                                    value={addressForm.name}\n                                    onChange={(e) =>\n                                        setAddressForm({ ...addressForm, name: e.target.value })\n                                    }\n                                />\n                            </Grid>\n                            <Grid item xs={12} sm={6}>\n                                <TextField\n                                    required\n                                    margin=\"dense\"\n                                    label=\"聯絡電話\"\n                                    fullWidth\n                                    value={addressForm.phone}\n                                    onChange={(e) =>\n                                        setAddressForm({ ...addressForm, phone: e.target.value })\n                                    }\n                                />\n                            </Grid>\n                            <Grid item xs={12} sm={6}>\n                                <TextField\n                                    required\n                                    margin=\"dense\"\n                                    label=\"郵遞區號\"\n                                    fullWidth\n                                    value={addressForm.postal_code}\n                                    onChange={(e) =>\n                                        setAddressForm({ ...addressForm, postal_code: e.target.value })\n                                    }\n                                />\n                            </Grid>\n                            <Grid item xs={12} sm={6}>\n                                <TextField\n                                    required\n                                    margin=\"dense\"\n                                    label=\"城市\"\n                                    fullWidth\n                                    value={addressForm.city}\n                                    onChange={(e) =>\n                                        setAddressForm({ ...addressForm, city: e.target.value })\n                                    }\n                                />\n                            </Grid>\n                            <Grid item xs={12} sm={6}>\n                                <TextField\n                                    required\n                                    margin=\"dense\"\n                                    label=\"區域\"\n                                    fullWidth\n                                    value={addressForm.district}\n                                    onChange={(e) =>\n                                        setAddressForm({ ...addressForm, district: e.target.value })\n                                    }\n                                />\n                            </Grid>\n                            <Grid item xs={12}>\n                                <TextField\n                                    required\n                                    margin=\"dense\"\n                                    label=\"街道地址\"\n                                    fullWidth\n                                    value={addressForm.street}\n                                    onChange={(e) =>\n                                        setAddressForm({ ...addressForm, street: e.target.value })\n                                    }\n                                />\n                            </Grid>\n                            <Grid item xs={12}>\n                                <FormControlLabel\n                                    control={\n                                        <Switch\n                                            checked={addressForm.is_default}\n                                            onChange={(e) =>\n                                                setAddressForm({\n                                                    ...addressForm,\n                                                    is_default: e.target.checked,\n                                                })\n                                            }\n                                        />\n                                    }\n                                    label=\"設為預設地址\"\n                                />\n                            </Grid>\n                        </Grid>\n                    </Box>\n                </DialogContent>\n                <DialogActions>\n                    <Button onClick={handleAddressClose}>取消</Button>\n                    <Button onClick={handleAddressSubmit} variant=\"contained\">\n                        儲存\n                    </Button>\n                </DialogActions>\n            </Dialog>\n\n            <Menu\n                anchorEl={anchorEl}\n                open={Boolean(anchorEl)}\n                onClose={handleAddressMenuClose}\n            >\n                <MenuItem onClick={handleEditAddress}>\n                    <EditIcon fontSize=\"small\" sx={{ mr: 1 }} />\n                    編輯地址\n                </MenuItem>\n                <MenuItem\n                    onClick={() => setDeleteConfirmOpen(true)}\n                    sx={{ color: 'error.main' }}\n                >\n                    <DeleteIcon fontSize=\"small\" sx={{ mr: 1 }} />\n                    刪除地址\n                </MenuItem>\n            </Menu>\n\n            <Dialog\n                open={deleteConfirmOpen}\n                onClose={() => setDeleteConfirmOpen(false)}\n            >\n                <DialogTitle>確認刪除地址</DialogTitle>\n                <DialogContent>\n                    <Typography>\n                        確定要刪除這個地址嗎？此操作無法復原。\n                    </Typography>\n                </DialogContent>\n                <DialogActions>\n                    <Button onClick={() => setDeleteConfirmOpen(false)}>\n                        取消\n                    </Button>\n                    <Button\n                        onClick={handleDeleteAddress}\n                        color=\"error\"\n                        variant=\"contained\"\n                    >\n                        刪除\n                    </Button>\n                </DialogActions>\n            </Dialog>\n\n            <Dialog\n                open={resetPasswordDialog}\n                onClose={handleResetPasswordClose}\n                maxWidth=\"sm\"\n                fullWidth\n            >\n                <DialogTitle>\n                    重置密碼\n                </DialogTitle>\n                <DialogContent>\n                    <Box sx={{ mt: 2 }}>\n                        <Grid container spacing={2}>\n                            <Grid item xs={12}>\n                                <TextField\n                                    required\n                                    margin=\"dense\"\n                                    label=\"新密碼\"\n                                    type={showPassword.newPassword ? \"text\" : \"password\"}\n                                    fullWidth\n                                    value={resetPasswordForm.newPassword}\n                                    onChange={(e) =>\n                                        setResetPasswordForm({\n                                            ...resetPasswordForm,\n                                            newPassword: e.target.value\n                                        })\n                                    }\n                                    InputProps={{\n                                        endAdornment: (\n                                            <IconButton\n                                                onClick={() => setShowPassword({\n                                                    ...showPassword,\n                                                    newPassword: !showPassword.newPassword\n                                                })}\n                                                edge=\"end\"\n                                            >\n                                                {showPassword.newPassword ? <VisibilityOffIcon /> : <VisibilityIcon />}\n                                            </IconButton>\n                                        ),\n                                    }}\n                                />\n                            </Grid>\n                            <Grid item xs={12}>\n                                <TextField\n                                    required\n                                    margin=\"dense\"\n                                    label=\"確認新密碼\"\n                                    type={showPassword.confirmPassword ? \"text\" : \"password\"}\n                                    fullWidth\n                                    value={resetPasswordForm.confirmPassword}\n                                    onChange={(e) =>\n                                        setResetPasswordForm({\n                                            ...resetPasswordForm,\n                                            confirmPassword: e.target.value\n                                        })\n                                    }\n                                    InputProps={{\n                                        endAdornment: (\n                                            <IconButton\n                                                onClick={() => setShowPassword({\n                                                    ...showPassword,\n                                                    confirmPassword: !showPassword.confirmPassword\n                                                })}\n                                                edge=\"end\"\n                                            >\n                                                {showPassword.confirmPassword ? <VisibilityOffIcon /> : <VisibilityIcon />}\n                                            </IconButton>\n                                        ),\n                                    }}\n                                />\n                            </Grid>\n                        </Grid>\n                    </Box>\n                </DialogContent>\n                <DialogActions>\n                    <Button onClick={handleResetPasswordClose}>取消</Button>\n                    <Button onClick={handleResetPasswordSubmit} variant=\"contained\">\n                        確認重置\n                    </Button>\n                </DialogActions>\n            </Dialog>\n\n            <Snackbar\n                open={snackbar.open}\n                autoHideDuration={2000}\n                onClose={() => setSnackbar({ ...snackbar, open: false })}\n                anchorOrigin={{ vertical: 'top', horizontal: 'center' }}\n            >\n                <Alert\n                    onClose={() => setSnackbar({ ...snackbar, open: false })}\n                    severity={snackbar.severity}\n                    sx={{ width: '100%' }}\n                >\n                    {snackbar.message}\n                </Alert>\n            </Snackbar>\n        </Container>\n    );\n};\n\nexport default Profile; "],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}