{"ast":null,"code":"import axios from 'axios';\nimport { axiosConfig } from '../config/api';\n\n// 創建 axios 實例\nconst api = axios.create(axiosConfig);\n\n// 請求攔截器\napi.interceptors.request.use(config => {\n  const token = localStorage.getItem('userToken');\n  if (token) {\n    config.headers['Authorization'] = `Bearer ${token}`;\n  }\n  return config;\n}, error => {\n  return Promise.reject(error);\n});\n\n// 響應攔截器\napi.interceptors.response.use(response => response, error => {\n  var _error$response;\n  if (((_error$response = error.response) === null || _error$response === void 0 ? void 0 : _error$response.status) === 401) {\n    // 統一處理未授權錯誤\n    localStorage.removeItem('userToken');\n    localStorage.removeItem('userData');\n    window.location.href = '/login';\n  }\n  return Promise.reject(error);\n});\n\n// API 服務\nexport const apiService = {\n  // 用戶偏好設置\n  preferences: {\n    get: () => api.get(API_CONFIG.ENDPOINTS.USER.PREFERENCES),\n    update: data => api.put(API_CONFIG.ENDPOINTS.USER.PREFERENCES, data)\n  },\n  // 認證相關\n  auth: {\n    login: credentials => api.post(API_CONFIG.ENDPOINTS.AUTH.LOGIN, credentials),\n    register: userData => api.post(API_CONFIG.ENDPOINTS.AUTH.REGISTER, userData),\n    refresh: token => api.post(API_CONFIG.ENDPOINTS.AUTH.REFRESH, {\n      token\n    })\n  }\n\n  // ... 其他 API 服務\n};\nexport default api;","map":{"version":3,"names":["axios","axiosConfig","api","create","interceptors","request","use","config","token","localStorage","getItem","headers","error","Promise","reject","response","_error$response","status","removeItem","window","location","href","apiService","preferences","get","API_CONFIG","ENDPOINTS","USER","PREFERENCES","update","data","put","auth","login","credentials","post","AUTH","LOGIN","register","userData","REGISTER","refresh","REFRESH"],"sources":["/Users/sumingkai/Documents/OrderManagerSystem/frontend/src/services/api.js"],"sourcesContent":["import axios from 'axios';\nimport { axiosConfig } from '../config/api';\n\n// 創建 axios 實例\nconst api = axios.create(axiosConfig);\n\n// 請求攔截器\napi.interceptors.request.use(\n    (config) => {\n        const token = localStorage.getItem('userToken');\n        if (token) {\n            config.headers['Authorization'] = `Bearer ${token}`;\n        }\n        return config;\n    },\n    (error) => {\n        return Promise.reject(error);\n    }\n);\n\n// 響應攔截器\napi.interceptors.response.use(\n    (response) => response,\n    (error) => {\n        if (error.response?.status === 401) {\n            // 統一處理未授權錯誤\n            localStorage.removeItem('userToken');\n            localStorage.removeItem('userData');\n            window.location.href = '/login';\n        }\n        return Promise.reject(error);\n    }\n);\n\n// API 服務\nexport const apiService = {\n    // 用戶偏好設置\n    preferences: {\n        get: () => api.get(API_CONFIG.ENDPOINTS.USER.PREFERENCES),\n        update: (data) => api.put(API_CONFIG.ENDPOINTS.USER.PREFERENCES, data),\n    },\n\n    // 認證相關\n    auth: {\n        login: (credentials) => api.post(API_CONFIG.ENDPOINTS.AUTH.LOGIN, credentials),\n        register: (userData) => api.post(API_CONFIG.ENDPOINTS.AUTH.REGISTER, userData),\n        refresh: (token) => api.post(API_CONFIG.ENDPOINTS.AUTH.REFRESH, { token }),\n    },\n\n    // ... 其他 API 服務\n};\n\nexport default api; "],"mappings":"AAAA,OAAOA,KAAK,MAAM,OAAO;AACzB,SAASC,WAAW,QAAQ,eAAe;;AAE3C;AACA,MAAMC,GAAG,GAAGF,KAAK,CAACG,MAAM,CAACF,WAAW,CAAC;;AAErC;AACAC,GAAG,CAACE,YAAY,CAACC,OAAO,CAACC,GAAG,CACvBC,MAAM,IAAK;EACR,MAAMC,KAAK,GAAGC,YAAY,CAACC,OAAO,CAAC,WAAW,CAAC;EAC/C,IAAIF,KAAK,EAAE;IACPD,MAAM,CAACI,OAAO,CAAC,eAAe,CAAC,GAAG,UAAUH,KAAK,EAAE;EACvD;EACA,OAAOD,MAAM;AACjB,CAAC,EACAK,KAAK,IAAK;EACP,OAAOC,OAAO,CAACC,MAAM,CAACF,KAAK,CAAC;AAChC,CACJ,CAAC;;AAED;AACAV,GAAG,CAACE,YAAY,CAACW,QAAQ,CAACT,GAAG,CACxBS,QAAQ,IAAKA,QAAQ,EACrBH,KAAK,IAAK;EAAA,IAAAI,eAAA;EACP,IAAI,EAAAA,eAAA,GAAAJ,KAAK,CAACG,QAAQ,cAAAC,eAAA,uBAAdA,eAAA,CAAgBC,MAAM,MAAK,GAAG,EAAE;IAChC;IACAR,YAAY,CAACS,UAAU,CAAC,WAAW,CAAC;IACpCT,YAAY,CAACS,UAAU,CAAC,UAAU,CAAC;IACnCC,MAAM,CAACC,QAAQ,CAACC,IAAI,GAAG,QAAQ;EACnC;EACA,OAAOR,OAAO,CAACC,MAAM,CAACF,KAAK,CAAC;AAChC,CACJ,CAAC;;AAED;AACA,OAAO,MAAMU,UAAU,GAAG;EACtB;EACAC,WAAW,EAAE;IACTC,GAAG,EAAEA,CAAA,KAAMtB,GAAG,CAACsB,GAAG,CAACC,UAAU,CAACC,SAAS,CAACC,IAAI,CAACC,WAAW,CAAC;IACzDC,MAAM,EAAGC,IAAI,IAAK5B,GAAG,CAAC6B,GAAG,CAACN,UAAU,CAACC,SAAS,CAACC,IAAI,CAACC,WAAW,EAAEE,IAAI;EACzE,CAAC;EAED;EACAE,IAAI,EAAE;IACFC,KAAK,EAAGC,WAAW,IAAKhC,GAAG,CAACiC,IAAI,CAACV,UAAU,CAACC,SAAS,CAACU,IAAI,CAACC,KAAK,EAAEH,WAAW,CAAC;IAC9EI,QAAQ,EAAGC,QAAQ,IAAKrC,GAAG,CAACiC,IAAI,CAACV,UAAU,CAACC,SAAS,CAACU,IAAI,CAACI,QAAQ,EAAED,QAAQ,CAAC;IAC9EE,OAAO,EAAGjC,KAAK,IAAKN,GAAG,CAACiC,IAAI,CAACV,UAAU,CAACC,SAAS,CAACU,IAAI,CAACM,OAAO,EAAE;MAAElC;IAAM,CAAC;EAC7E;;EAEA;AACJ,CAAC;AAED,eAAeN,GAAG","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}