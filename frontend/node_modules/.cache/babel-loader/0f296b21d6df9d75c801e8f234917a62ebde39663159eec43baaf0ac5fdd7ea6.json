{"ast":null,"code":"import React,{useState,useEffect}from'react';import{AppBar,Box,Toolbar,IconButton,Typography,Menu,Container,Avatar,Button,Tooltip,MenuItem,Badge}from'@mui/material';import{ShoppingCart,Person}from'@mui/icons-material';import{Link,useNavigate}from'react-router-dom';import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";const Navbar=()=>{var _user$username,_user$username$;const navigate=useNavigate();const[user,setUser]=useState(null);const[anchorElUser,setAnchorElUser]=useState(null);useEffect(()=>{const userData=localStorage.getItem('userData');if(userData){setUser(JSON.parse(userData));}},[]);const handleOpenUserMenu=event=>{setAnchorElUser(event.currentTarget);};const handleCloseUserMenu=()=>{setAnchorElUser(null);};const handleLogout=()=>{localStorage.removeItem('userToken');localStorage.removeItem('userData');setUser(null);handleCloseUserMenu();navigate('/login');};const handleProfile=()=>{handleCloseUserMenu();navigate('/profile');};return/*#__PURE__*/_jsx(AppBar,{position:\"static\",sx:{mb:2},children:/*#__PURE__*/_jsx(Container,{maxWidth:\"xl\",children:/*#__PURE__*/_jsxs(Toolbar,{disableGutters:true,children:[/*#__PURE__*/_jsx(Typography,{variant:\"h6\",noWrap:true,component:Link,to:\"/\",sx:{mr:2,display:'flex',fontWeight:700,color:'inherit',textDecoration:'none'},children:\"\\u8A02\\u55AE\\u7BA1\\u7406\\u7CFB\\u7D71\"}),/*#__PURE__*/_jsxs(Box,{sx:{flexGrow:1,display:'flex'},children:[/*#__PURE__*/_jsx(Button,{component:Link,to:\"/products\",sx:{my:2,color:'white',display:'block'},children:\"\\u6240\\u6709\\u5546\\u54C1\"}),/*#__PURE__*/_jsx(Button,{component:Link,to:\"/categories\",sx:{my:2,color:'white',display:'block'},children:\"\\u5546\\u54C1\\u5206\\u985E\"})]}),/*#__PURE__*/_jsxs(Box,{sx:{flexGrow:0,display:'flex',alignItems:'center',gap:2},children:[/*#__PURE__*/_jsx(IconButton,{component:Link,to:\"/cart\",size:\"large\",\"aria-label\":\"\\u8CFC\\u7269\\u8ECA\",color:\"inherit\",children:/*#__PURE__*/_jsx(Badge,{badgeContent:0,color:\"error\",children:/*#__PURE__*/_jsx(ShoppingCart,{})})}),user?/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(Tooltip,{title:\"\\u958B\\u555F\\u8A2D\\u5B9A\",children:/*#__PURE__*/_jsx(IconButton,{onClick:handleOpenUserMenu,sx:{p:0},children:/*#__PURE__*/_jsx(Avatar,{alt:user.username,children:(_user$username=user.username)===null||_user$username===void 0?void 0:(_user$username$=_user$username[0])===null||_user$username$===void 0?void 0:_user$username$.toUpperCase()})})}),/*#__PURE__*/_jsxs(Menu,{sx:{mt:'45px'},id:\"menu-appbar\",anchorEl:anchorElUser,anchorOrigin:{vertical:'top',horizontal:'right'},keepMounted:true,transformOrigin:{vertical:'top',horizontal:'right'},open:Boolean(anchorElUser),onClose:handleCloseUserMenu,children:[/*#__PURE__*/_jsx(MenuItem,{onClick:handleProfile,children:/*#__PURE__*/_jsx(Typography,{textAlign:\"center\",children:\"\\u500B\\u4EBA\\u8CC7\\u6599\"})}),/*#__PURE__*/_jsx(MenuItem,{onClick:handleLogout,children:/*#__PURE__*/_jsx(Typography,{textAlign:\"center\",children:\"\\u767B\\u51FA\"})})]})]}):/*#__PURE__*/_jsx(Button,{component:Link,to:\"/login\",color:\"inherit\",startIcon:/*#__PURE__*/_jsx(Person,{}),children:\"\\u767B\\u5165\"})]})]})})});};export default Navbar;","map":{"version":3,"names":["React","useState","useEffect","AppBar","Box","Toolbar","IconButton","Typography","Menu","Container","Avatar","Button","Tooltip","MenuItem","Badge","ShoppingCart","Person","Link","useNavigate","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","Navbar","_user$username","_user$username$","navigate","user","setUser","anchorElUser","setAnchorElUser","userData","localStorage","getItem","JSON","parse","handleOpenUserMenu","event","currentTarget","handleCloseUserMenu","handleLogout","removeItem","handleProfile","position","sx","mb","children","maxWidth","disableGutters","variant","noWrap","component","to","mr","display","fontWeight","color","textDecoration","flexGrow","my","alignItems","gap","size","badgeContent","title","onClick","p","alt","username","toUpperCase","mt","id","anchorEl","anchorOrigin","vertical","horizontal","keepMounted","transformOrigin","open","Boolean","onClose","textAlign","startIcon"],"sources":["/Users/sumingkai/Documents/OrderManagerSystem/frontend/src/components/Store/Navbar.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport {\n    AppBar,\n    Box,\n    Toolbar,\n    IconButton,\n    Typography,\n    Menu,\n    Container,\n    Avatar,\n    Button,\n    Tooltip,\n    MenuItem,\n    Badge,\n} from '@mui/material';\nimport { ShoppingCart, Person } from '@mui/icons-material';\nimport { Link, useNavigate } from 'react-router-dom';\n\nconst Navbar = () => {\n    const navigate = useNavigate();\n    const [user, setUser] = useState(null);\n    const [anchorElUser, setAnchorElUser] = useState(null);\n\n    useEffect(() => {\n        const userData = localStorage.getItem('userData');\n        if (userData) {\n            setUser(JSON.parse(userData));\n        }\n    }, []);\n\n    const handleOpenUserMenu = (event) => {\n        setAnchorElUser(event.currentTarget);\n    };\n\n    const handleCloseUserMenu = () => {\n        setAnchorElUser(null);\n    };\n\n    const handleLogout = () => {\n        localStorage.removeItem('userToken');\n        localStorage.removeItem('userData');\n        setUser(null);\n        handleCloseUserMenu();\n        navigate('/login');\n    };\n\n    const handleProfile = () => {\n        handleCloseUserMenu();\n        navigate('/profile');\n    };\n\n    return (\n        <AppBar position=\"static\" sx={{ mb: 2 }}>\n            <Container maxWidth=\"xl\">\n                <Toolbar disableGutters>\n                    <Typography\n                        variant=\"h6\"\n                        noWrap\n                        component={Link}\n                        to=\"/\"\n                        sx={{\n                            mr: 2,\n                            display: 'flex',\n                            fontWeight: 700,\n                            color: 'inherit',\n                            textDecoration: 'none',\n                        }}\n                    >\n                        訂單管理系統\n                    </Typography>\n\n                    <Box sx={{ flexGrow: 1, display: 'flex' }}>\n                        <Button\n                            component={Link}\n                            to=\"/products\"\n                            sx={{ my: 2, color: 'white', display: 'block' }}\n                        >\n                            所有商品\n                        </Button>\n                        <Button\n                            component={Link}\n                            to=\"/categories\"\n                            sx={{ my: 2, color: 'white', display: 'block' }}\n                        >\n                            商品分類\n                        </Button>\n                    </Box>\n\n                    <Box sx={{ flexGrow: 0, display: 'flex', alignItems: 'center', gap: 2 }}>\n                        <IconButton\n                            component={Link}\n                            to=\"/cart\"\n                            size=\"large\"\n                            aria-label=\"購物車\"\n                            color=\"inherit\"\n                        >\n                            <Badge badgeContent={0} color=\"error\">\n                                <ShoppingCart />\n                            </Badge>\n                        </IconButton>\n\n                        {user ? (\n                            <>\n                                <Tooltip title=\"開啟設定\">\n                                    <IconButton onClick={handleOpenUserMenu} sx={{ p: 0 }}>\n                                        <Avatar alt={user.username}>\n                                            {user.username?.[0]?.toUpperCase()}\n                                        </Avatar>\n                                    </IconButton>\n                                </Tooltip>\n                                <Menu\n                                    sx={{ mt: '45px' }}\n                                    id=\"menu-appbar\"\n                                    anchorEl={anchorElUser}\n                                    anchorOrigin={{\n                                        vertical: 'top',\n                                        horizontal: 'right',\n                                    }}\n                                    keepMounted\n                                    transformOrigin={{\n                                        vertical: 'top',\n                                        horizontal: 'right',\n                                    }}\n                                    open={Boolean(anchorElUser)}\n                                    onClose={handleCloseUserMenu}\n                                >\n                                    <MenuItem onClick={handleProfile}>\n                                        <Typography textAlign=\"center\">個人資料</Typography>\n                                    </MenuItem>\n                                    <MenuItem onClick={handleLogout}>\n                                        <Typography textAlign=\"center\">登出</Typography>\n                                    </MenuItem>\n                                </Menu>\n                            </>\n                        ) : (\n                            <Button\n                                component={Link}\n                                to=\"/login\"\n                                color=\"inherit\"\n                                startIcon={<Person />}\n                            >\n                                登入\n                            </Button>\n                        )}\n                    </Box>\n                </Toolbar>\n            </Container>\n        </AppBar>\n    );\n};\n\nexport default Navbar; "],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}